<html lang="en-US">
<head>
    <title>Yung</title>
    <meta content="IE=edge" http-equiv="x-ua-compatible">
    <meta content="initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no" name="viewport">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta content="yes" name="apple-touch-fullscreen">
    <!-- Fonts -->
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,300,700' rel='stylesheet' type='text/css'>
    <!-- Icons -->
    <link href="http://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css" media="all" rel="stylesheet" type="text/css">
    <!-- Styles -->
    <link href="../css/keyframes.css" rel="stylesheet" type="text/css">
    <link href="../css/materialize.min.css" rel="stylesheet" type="text/css">
    <link href="../css/swiper.css" rel="stylesheet" type="text/css">
    <link href="../css/swipebox.min.css" rel="stylesheet" type="text/css">
    <link href="../css/external/style.css" rel="stylesheet" type="text/css">

    <style>
        /* Always set the map height explicitly to define the size of the div
         * element that contains the map. */
        #adminMap {
            height:651px;
            width:460px;

        }
        /* Optional: Makes the sample page fill the window. */
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAudcLsRCpIcU_dRsKeL3fAMAkhyI6kUf8&callback=initMap" async defer></script>

    <script>
        var map, ren, ser;
        var data = {};

        function initMap() {
            map = new google.maps.Map( document.getElementById('adminMap'), {'zoom':12, 'mapTypeId': google.maps.MapTypeId.ROADMAP, 'center': new google.maps.LatLng(6.933477, 79.855313) })

            ren = new google.maps.DirectionsRenderer( {'draggable':false} );
            ren.setMap(map);
            ser = new google.maps.DirectionsService();
            fetchdata();

        }

        function fetchdata()
        {
            var route_no = localStorage.getItem("bus_route_no");

            jQuery.ajax({
                type: "GET",
                dataType: 'jsonp',
                url: "http://www.titansmora.org/findmybusfinal/BusRouteMap/busRouteMapLoader.php?" +
                "route_no="+route_no,
                success: function (obj, textstatus) {
                    try { setroute( eval('(' + obj + ')') ); }
                    catch(e){ alert(e); }
                }
            });
        }
        function setroute(os)
        {
            var wp = [];
            for(var i=0;i<os.waypoints.length;i++)
                wp[i] = {'location': new google.maps.LatLng(os.waypoints[i][0], os.waypoints[i][1]),'stopover':false }

            ser.route({'origin':new google.maps.LatLng(os.start.lat,os.start.lng),
                'destination':new google.maps.LatLng(os.end.lat,os.end.lng),
                'waypoints': wp,
                'travelMode': google.maps.DirectionsTravelMode.DRIVING},function(res,sts) {
                if(sts=='OK')ren.setDirections(res);
            })
        }



    </script>
    <!--The loading icon css settings for this file-->
    <style>
        .no-js #loader { display: none;  }
        .js #loader { display: block; position: absolute; left: 100px; top: 0; }
        .se-pre-con {
            position: fixed;
            left: 0px;
            top: 0px;
            width: 100%;
            height: 100%;
            z-index: 9999;
            background: url(../images/89.gif) center no-repeat #fff;
        }
    </style>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.2/modernizr.js"></script>
    <script>
        $(window).load(function() {
            // Animate loader off screen
            $(".se-pre-con").fadeOut("slow");
        });
    </script>

</head>

<body>
<div class="m-scene" id="main"> <!-- Main Container -->
    <!-- Page Content -->
    <div id="content" class="page">

        <!-- Toolbar -->
        <div id="toolbar" class="primary-color">
            <div class="open-left">
                <i class="ion-arrow-left-c" onclick="goHome()"></i>
            </div>
            <span class="title"> Yung </span>
            <div class="open-right">
                 <i class="ion-android-menu" onclick="goContact()"></i>
            </div>
        </div>

        <!-- Main Content -->

        <!-- Activity Content -->
        <div class="animated fadeinup delay-1">
            <div id="adminMap"></div>

        </div>
    </div>
</div>


<script src="../js/jquery-2.1.0.min.js"></script>
<script type="text/javascript" src="../controllers/bus_halt_list_controller.js"></script>
<script src="../js/jquery.swipebox.min.js"></script>
<script src="../js/materialize.min.js"></script>
<script src="../js/swiper.min.js"></script>
<script src="../js/jquery.mixitup.min.js"></script>
<script src="../js/masonry.min.js"></script>
<script src="../js/chart.min.js"></script>
<script src="../js/functions.js"></script>
<script type="text/javascript" charset="utf-8" src="../cordova.js"></script>
</body>
</html>